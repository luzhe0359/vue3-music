import{c as I,d as S,a as P}from"./typescript.0912747d.js";import{d as H,e as M,c as R,k as b,u as W,a as q,_ as O,w as V}from"./base.0a124beb.js";import{C as j}from"./event.28e0ca55.js";import{t as G}from"./error.47aa3b19.js";import{a as L}from"./scroll.1db21b33.js";import{g as C,s as d,r as m,j as N,d as U,o as Y,w as D,l as F,m as J,z as K,y as Q,q as T,x as i,I as z}from"./index.d9e4a76a.js";const X=H({zIndex:{type:M([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Z={scroll:({scrollTop:a,fixed:c})=>R(a)&&b(c),[j]:a=>b(a)},$="ElAffix",ee=C({name:$}),te=C({...ee,props:X,emits:Z,setup(a,{expose:c,emit:x}){const e=a,g=W("affix"),l=d(),p=d(),s=d(),{height:r}=I(),{height:n,width:h,top:w,bottom:E,update:v}=S(p,{windowScroll:!1}),f=S(l),o=m(!1),_=m(0),u=m(0),k=N(()=>({height:o.value?`${n.value}px`:"",width:o.value?`${h.value}px`:""})),A=N(()=>{if(!o.value)return{};const t=e.offset?q(e.offset):0;return{height:`${n.value}px`,width:`${h.value}px`,top:e.position==="top"?t:"",bottom:e.position==="bottom"?t:"",transform:u.value?`translateY(${u.value}px)`:"",zIndex:e.zIndex}}),y=()=>{if(!!s.value)if(_.value=s.value instanceof Window?document.documentElement.scrollTop:s.value.scrollTop||0,e.position==="top")if(e.target){const t=f.bottom.value-e.offset-n.value;o.value=e.offset>w.value&&f.bottom.value>0,u.value=t<0?t:0}else o.value=e.offset>w.value;else if(e.target){const t=r.value-f.top.value-e.offset-n.value;o.value=r.value-e.offset<E.value&&r.value>f.top.value,u.value=t<0?-t:0}else o.value=r.value-e.offset<E.value},B=()=>{v(),x("scroll",{scrollTop:_.value,fixed:o.value})};return U(o,t=>x("change",t)),Y(()=>{var t;e.target?(l.value=(t=document.querySelector(e.target))!=null?t:void 0,l.value||G($,`Target is not existed: ${e.target}`)):l.value=document.documentElement,s.value=L(p.value,!0),v()}),P(s,"scroll",B),D(y),c({update:y,updateRoot:v}),(t,ae)=>(F(),J("div",{ref_key:"root",ref:p,class:T(i(g).b()),style:z(i(k))},[K("div",{class:T({[i(g).m("fixed")]:o.value}),style:z(i(A))},[Q(t.$slots,"default")],6)],6))}});var oe=O(te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const ie=V(oe);export{ie as E};
